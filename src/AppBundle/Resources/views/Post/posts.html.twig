{% extends "@App/base.html.twig" %}

{% block title %}Articles{% endblock %}

{% block content %}
    <div class="container">
        
        <div class="page-header">
            <h2>
                Articles <small>({{ pagination.getTotalItemCount }})</small>
            </h2>
        </div>
        
        {% for post in pagination %}
            <article>
                <h2><a href="{{ path("post_show", {"id": post.id }) }}">{{ post.name }}</a></h2>
                <p>
                    <small>Cat√©gorie : <a href="{{ path('lists_posts_category', {'categorySlug' : post.category.slug}) }}">{{ post.category }}</a>
                        de <a href="{{ path("list_posts_author", {"idAuthor": post.author.id }) }}">{{ post.author.username }}</a> le {{ post.creationDate|date('d-m-Y') }}</small>
                </p>
                <p>
                    {% set postShowLink = path("post_show", {"id": post.id }) %}
                    {{ post.content|truncate(500, true, '<a href="' ~ postShowLink ~ '">...</a>')|purify }}
                </p>
                <p class="text-right">
                    <a href="{{ path("post_show", {"id": post.id }) }}" class="btn btn-primary">En savoir plus</a>
                </p>
            </article>
        {% endfor %}
        
        <div class="text-center">
            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>
        </div>
    </div>
{% endblock %}
